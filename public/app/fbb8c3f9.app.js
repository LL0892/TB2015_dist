"use strict";angular.module("tbApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","ezfb"]).constant("Urls",{client:"/assets/images/",api:"http://localhost:9000/api/"}).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(a,b,c,d){b.otherwise("/"),c.html5Mode(!0),d.interceptors.push("authInterceptor")}]).config(["ezfbProvider",function(a){a.setInitParams({appId:"1451571261811947",version:"v2.3"}),a.setLocale("fr_CH")}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?(d.path("/login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$location","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d){c.isLoggedIn(function(a){d.authenticate&&!a&&b.path("/login")})})}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl",authenticate:!0})}]),angular.module("tbApp").controller("LoginCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("tbApp").controller("SettingsCtrl",["$scope","User","Auth",function(a,b,c){a.errors={},a.changePassword=function(b){a.submitted=!0,b.$valid&&c.changePassword(a.user.oldPassword,a.user.newPassword).then(function(){a.message="Password successfully changed."})["catch"](function(){b.password.$setValidity("mongoose",!1),a.errors.other="Incorrect password",a.message=""})}}]);var App=angular.module("tbApp");App.controller("SignupCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.register=function(d){a.submitted=!0,console.log(d),d.$valid&&b.createUser({firstName:a.user.firstName,lastName:a.user.lastName,email:a.user.email,password:a.user.password,dateOfBirth:d.dateOfBirth.$$lastCommittedViewValue,gender:d.gender.$$lastCommittedViewValue}).then(function(){c.path("/")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})},a.loginOauth=function(a){d.location.href="/auth/"+a},a.disabled=function(a,b){return"day"===b&&(0===a.getDay()||6===a.getDay())},a.maxDate=new Date,a.open=function(b){b.preventDefault(),b.stopPropagation(),a.opened=!0},a.dateOptions={formatYear:"yyyy",startingDay:1},a.format="dd-MMMM-yyyy";var e=new Date;e.setDate(e.getDate()+1);var f=new Date;f.setDate(e.getDate()+2),a.events=[{date:e,status:"full"},{date:f,status:"partially"}],a.getDayClass=function(b,c){if("day"===c)for(var d=new Date(b).setHours(0,0,0,0),e=0;e<a.events.length;e++){var f=new Date(a.events[e].date).setHours(0,0,0,0);if(d===f)return a.events[e].status}return""}}]),angular.module("tbApp").controller("BusinessNewPrestationCtrl",["$scope","Business","Auth",function(a,b,c){a.prestation={},a.errors={},c.getCurrentUser(function(c){var d=c;a.submit=function(c){a.submitted=!0,console.log(c),c.$valid&&b.createPrestation(d.businessId,{name:a.prestation.name,shortDescription:a.prestation.shortDescription,description:a.prestation.description,duration:a.prestation.duration}).then(function(){a.prestation={}})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,d){c[d].$setValidity("mongoose",!1),a.errors[d]=b.message})})}})}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-newPrestation",{url:"/business/newPrestation",templateUrl:"app/business/business-newPrestation/business-newPrestation.html",controller:"BusinessNewPrestationCtrl"})}]),angular.module("tbApp").controller("BusinessNewRendezvousCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-newRendezvous",{url:"/business/newRendezvous",templateUrl:"app/business/business-newRendezvous/business-newRendezvous.html",controller:"BusinessNewRendezvousCtrl"})}]),angular.module("tbApp").controller("BusinessNewScheduleCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-newSchedule",{url:"/business/newSchedule",templateUrl:"app/business/business-newSchedule/business-newSchedule.html",controller:"BusinessNewScheduleCtrl"})}]),angular.module("tbApp").controller("BusinessNewStaffCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-newStaff",{url:"/business/newStaff",templateUrl:"app/business/business-newStaff/business-newStaff.html",controller:"BusinessNewStaffCtrl"})}]),angular.module("tbApp").controller("BusinessPrestationsCtrl",["$scope","Auth","Business",function(a,b,c){function d(b){c.getPrestations(b.businessId,function(b){a.prestations=b.prestations},function(b){a.error=b})}a.prestations={},a.user={},a.hiddenForm=!0,b.getCurrentUser(function(b){return a.user=b,b}).then(d),a.deletePrice=function(b,d){c.deletePrice(a.user.businessId,b,d,function(b){a.message=b.message},function(b){a.message=b})},a.addPrice=function(b,d){a.hiddenForm=!0,c.createPrice(a.user.businessId,b,d,function(b){a.message=b.message,a.hiddenForm=!0},function(b){a.message=b})},a.updateUI=function(b){console.log("update :"+b);var c=b._id,d=a.prestations._id.indexOf(c);-1!==d&&(a.prestations[d]=b),a.$apply()}}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-prestations",{url:"/business/prestations",templateUrl:"app/business/business-prestations/business-prestations.html",controller:"BusinessPrestationsCtrl"}).state("business-prestationsNewPrice",{url:"/business/prestations/NewPrice",templateUrl:"app/business/business-prestations/business-prestations-newPrice.html",controller:"BusinessPrestationsCtrl"})}]),angular.module("tbApp").controller("BusinessRendezvousCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-rendezvous",{url:"/business/rendezvous",templateUrl:"app/business/business-rendezvous/business-rendezvous.html",controller:"BusinessRendezvousCtrl"})}]),angular.module("tbApp").controller("BusinessSchedulesCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-schedules",{url:"/business/schedules",templateUrl:"app/business/business-schedules/business-schedules.html",controller:"BusinessSchedulesCtrl"})}]),angular.module("tbApp").controller("BusinessShowCtrl",["$scope","Auth","Business","Urls",function(a,b,c,d){function e(b){c.showBusiness(b.businessId,function(b){a.business=b,a.business.imageBusinessUrl=d.client+a.business.imageBusinessUrl},function(b){a.error=b})}b.getCurrentUser(function(a){return a}).then(e)}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-show",{url:"/business/show",templateUrl:"app/business/business-show/business-show.html",controller:"BusinessShowCtrl"})}]),angular.module("tbApp").controller("BusinessStaffsCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-staffs",{url:"/business/staffs",templateUrl:"app/business/business-staffs/business-staffs.html",controller:"BusinessStaffsCtrl"})}]),angular.module("tbApp").controller("BusinessUpdateCtrl",["$scope",function(a){a.message="Hello"}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business-update",{url:"/business/update",templateUrl:"app/business/business-update/business-update.html",controller:"BusinessUpdateCtrl"})}]),angular.module("tbApp").controller("BusinessCtrl",["$scope","$http","Auth","Business",function(a,b,c,d){function e(b){d.showBusiness(b.businessId,function(b){a.business=b},function(b){a.error=b})}c.getCurrentUser(function(a){return a}).then(e)}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("business",{url:"/business",templateUrl:"app/business/business.html",controller:"BusinessCtrl"})}]),angular.module("tbApp").controller("MainCtrl",["$scope","$http","ezfb","$q","$log",function(a,b,c,d,e){function f(){c.getLoginStatus().then(function(a){return c.api("/me")}).then(function(b){a.me=b,e.debug(a.me)})}function g(){return c.getLoginStatus().then(function(b){a.loginStatus=b})}function h(){return d.all([c.api("/me"),c.api("/me/likes")]).then(function(b){a.apiRes=b})}a.busiesses=[],b.get("/api/businesses").success(function(b){a.businesses=b}),f(),g().then(h),c.Event.subscribe("auth.statusChange",function(b){a.loginStatus=b,f(),h()}),a.login=function(){c.login(function(a){},{scope:"email,user_likes,user_location, user_birthday"}).then(function(a){})},a.logout=function(){c.logout()};var i=["loginStatus","apiRes"];angular.forEach(i,function(b){a.$watch(b,function(c){a[b+"JSON"]=JSON.stringify(c,null,2)},!0)})}]),angular.module("tbApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("tbApp").factory("Auth",["$http","User","$cookieStore","$q",function(a,b,c,d){var e=function(a){return angular.isFunction(a)?a:angular.noop},f={};return c.get("token")&&(f=b.get()),{login:function(g,h){return a.post("/auth/local",{email:g.email,password:g.password}).then(function(a){return c.put("token",a.data.token),f=b.get(),e(h)(),a.data},function(a){return this.logout(),e(h)(a.data),d.reject(a.data)}.bind(this))},logout:function(){c.remove("token"),f={}},createUser:function(a,d){return b.save(a,function(g){return c.put("token",g.token),f=b.get(),e(d)(null,a)},function(a){return this.logout(),e(d)(a)}.bind(this)).$promise},changePassword:function(a,c,d){return b.changePassword({id:f._id},{oldPassword:a,newPassword:c},function(a){return e(d)(null,a)},function(a){return e(d)(a)}).$promise},getCurrentUser:function(a){if(0===arguments.length)return f;var b=f.hasOwnProperty("$promise")?f.$promise:f;return d.when(b).then(function(b){return e(a)(b),b},function(){return e(a)({}),{}})},isLoggedIn:function(a){return 0===arguments.length?f.hasOwnProperty("roles"):this.getCurrentUser(null).then(function(b){var c=b.hasOwnProperty("roles");return e(a)(c),c})},isStaff:function(a){if(0===arguments.length){if(void 0===f.roles)return!1;var b=f.roles.indexOf("staff");return-1===b&&(b=!1),b}return this.getCurrentUser(null).then(function(b){if(void 0===b.roles)return!1;var c=b.roles.indexOf("staff");return e(a)(c),-1===c&&(c=!1),c})},getToken:function(){return c.get("token")}}}]),angular.module("tbApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("tbApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}});var app=angular.module("tbApp");app.controller("NavbarSecondryCtrl",["$scope","$modal","$log","Business",function(a,b,c,d){a.isCollapsed=!0,a.status1={isopen:!1},a.status2={isopen:!1},a.status3={isopen:!1},a.status4={isopen:!1},a.status5={isopen:!1},a.status6={isopen:!1},a.toggleDropdown=function(a){a.isopen=!a.isopen}}]),angular.module("tbApp").controller("NavbarCtrl",["$scope","$location","Auth",function(a,b,c){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isLoggedIn=c.isLoggedIn,a.isStaff=c.isStaff,a.getCurrentUser=c.getCurrentUser,a.logout=function(){c.logout(),b.path("/")},a.isActive=function(a){return a===b.path()}}]),angular.module("tbApp").factory("Business",["$http","Urls",function(a,b){return{getBusinesses:function(c,d){a({method:"GET",url:b.api+"businesses/"}).success(function(a){c(a)}).error(function(a){d(a)})},showBusiness:function(c,d,e){a({method:"GET",url:b.api+"businesses/"+c}).success(function(a){d(a)}).error(function(a){e(a)})},updateBusiness:function(c,d,e){a({method:"PUT",url:b.api+"businesses/"+c+"/status"}).success(function(a){d(a)}).error(function(a){e(a)})},getSchedules:function(c,d,e){a({method:"GET",url:b.api+"businesses/"+c+"/schedules"}).success(function(a){d(a)}).error(function(a){e(a)})},addSchedules:function(c,d,e,f){a({method:"POST",url:b.api+"businesses/"+c+"/schedules",data:d}).success(function(a){e(a)}).error(function(a){f(a)})},showSchedules:function(c,d,e,f){a({method:"GET",url:b.api+"businesses/"+c+"/schedules/"+d}).success(function(a){e(a)}).error(function(a){f(a)})},updateSchedule:function(c,d,e,f,g){a({method:"PUT",url:b.api+"businesses/"+c+"/schedules/"+d,data:e}).success(function(a){f(a)}).error(function(a){g(a)})},deleteSchedule:function(c,d,e,f){a({method:"DELETE",url:b.api+"businesses/"+c+"/schedules/"+d}).success(function(a){e(a)}).error(function(a){f(a)})},getStaffs:function(c,d,e){a({method:"GET",url:b.api+"businesses/"+c+"/staffs"}).success(function(a){d(a)}).error(function(a){e(a)})},showStaff:function(c,d,e,f){a({method:"GET",url:b.api+"businesses/"+c+"/staffs/"+d}).success(function(a){e(a)}).error(function(a){f(a)})},getPrestations:function(c,d,e){a({method:"GET",url:b.api+"businesses/"+c+"/prestations"}).success(function(a){d(a)}).error(function(a){e(a)})},createPrestation:function(c,d,e,f){a({method:"POST",url:b.api+"businesses/"+c+"/prestations",data:d}).success(function(a){e(a)}).error(function(a){f(a)})},showPrestation:function(c,d,e,f){a({method:"GET",url:b.api+"businesses/"+c+"/prestations/"+d}).success(function(a){e(a)}).error(function(a){f(a)})},updatePrestation:function(c,d,e,f,g){a({method:"PUT",url:b.api+"businesses/"+c+"/prestations/"+d,data:e}).success(function(a){f(a)}).error(function(a){g(a)})},createPrice:function(c,d,e,f,g){a({method:"POST",url:b.api+"businesses/"+c+"/prestations/"+d+"/prices",data:e}).success(function(a){f(a)}).error(function(a){g(a)})},showPrice:function(c,d,e,f,g){a({method:"GET",url:b.api+"businesses/"+c+"/prestations/"+d+"/prices/"+e}).success(function(a){f(a)}).error(function(a){g(a)})},updatePrice:function(c,d,e,f,g,h){a({method:"PUT",url:b.api+"businesses/"+c+"/prestations/"+d+"/prices/"+e,data:g}).success(function(a){f(a)}).error(function(a){h(a)})},deletePrice:function(c,d,e,f,g){a({method:"DELETE",url:b.api+"businesses/"+c+"/prestations/"+d+"/prices/"+e}).success(function(a){f(a)}).error(function(a){g(a)})},getRendezvous:function(c,d,e){a({method:"GET",url:b.api+"businesses/"+c+"/rendezvous"}).success(function(a){d(a)}).error(function(a){e(a)})},createRendezvous:function(c,d,e,f){a({method:"POST",url:b.api+"businesses/"+c+"/rendezvous",data:d}).success(function(a){e(a)}).error(function(a){f(a)})},showRendezvous:function(c,d,e,f){a({method:"GET",url:b.api+"businesses/"+c+"/rendezvous/"+d}).success(function(a){e(a)}).error(function(a){f(a)})},getNotification:function(c,d,e){a({method:"GET",url:b.api+"businesses/"+c+"/notifications"}).success(function(a){d(a)}).error(function(a){e(a)})},createNotification:function(c,d,e,f){a({method:"POST",url:b.api+"businesses/"+c+"/notifications",data:d}).success(function(a){e(a)}).error(function(a){f(a)})},deleteNotification:function(c,d,e,f){a({method:"DELETE",url:b.api+"businesses/"+c+"/notifications/"+d}).success(function(a){e(a)}).error(function(a){f(a)})}}}]),angular.module("tbApp").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("tbApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Login</h1><p>Default account is <code>test@test.com</code> / <code>test</code></p><p>Admin account is <code>admin@admin.com</code> / <code>admin</code></p><p>Staff account is <code>staff@staff.com</code> / <code>staff</code></p></div><div class=col-sm-12><form class=form name=form ng-submit=login(form) novalidate><div class=form-group><label>Email</label><input type=email name=email class=form-control ng-model=user.email required></div><div class=form-group><label>Password</label><input type=password name=password class=form-control ng-model=user.password required></div><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && submitted">Please enter your email and password.</p><p class=help-block ng-show="form.email.$error.email && submitted">Please enter a valid email.</p><p class=help-block>{{ errors.other }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Login</button> <a class="btn btn-default btn-lg btn-register" href=/signup>Register</a></div><hr><div><a class="btn btn-facebook" href="" ng-click="loginOauth(\'facebook\')"><i class="fa fa-facebook"></i> Connect with Facebook</a> <a class="btn btn-google-plus" href="" ng-click="loginOauth(\'google\')"><i class="fa fa-google-plus"></i> Connect with Google+</a></div></form></div></div><hr></div>'),a.put("app/account/settings/settings.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Change Password</h1></div><div class=col-sm-12><form class=form name=form ng-submit=changePassword(form) novalidate><div class=form-group><label>Current Password</label><input type=password name=password class=form-control ng-model=user.oldPassword mongoose-error><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.other }}</p></div><div class=form-group><label>New Password</label><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength=3 required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)">Password must be at least 3 characters.</p></div><p class=help-block>{{ message }}</p><button class="btn btn-lg btn-primary" type=submit>Save changes</button></form></div></div></div>'),a.put("app/account/signup/signup.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Sign up</h1></div><div class=col-sm-12><form class=form name=form ng-submit=register(form) novalidate><!-- First name --><div class=form-group ng-class="{ \'has-success\': form.firstName.$valid && submitted,\n                                            \'has-error\': form.firstName.$invalid && submitted }"><label>Prénom</label><input name=firstName class=form-control ng-model=user.firstName required><p class=help-block ng-show="form.firstName.$error.required && submitted">Un prénom est requis.</p></div><!-- Last name --><div class=form-group ng-class="{ \'has-success\': form.lastName.$valid && submitted,\n                                            \'has-error\': form.lastName.$invalid && submitted }"><label>Nom</label><input name=lastName class=form-control ng-model=user.lastName required><p class=help-block ng-show="form.lastName.$error.required && submitted">Un nom est requis.</p></div><!-- Email --><div class=form-group ng-class="{ \'has-success\': form.email.$valid && submitted,\n                                            \'has-error\': form.email.$invalid && submitted }"><label>Email</label><input type=email name=email class=form-control ng-model=user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && submitted">Ce n\'est pas une adresse mail valide.</p><p class=help-block ng-show="form.email.$error.required && submitted">What\'s your email address?</p><p class=help-block ng-show=form.email.$error.mongoose>{{ errors.email }}</p></div><!-- Password --><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                                            \'has-error\': form.password.$invalid && submitted }"><label>Password</label><input type=password name=password class=form-control ng-model=user.password ng-minlength=3 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">Password must be at least 3 characters.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.password }}</p></div><!-- Date of birth & gender --><div><div class=row><div class=col-sm-6><label>Date de naissance</label><div class=form-group ng-class="{ \'has-success\': form.dateOfBirth.$valid && submitted, \'has-error\': form.dateOfBirth.$invalid && submitted }"><p class=input-group><input class=form-control datepicker-popup={{format}} name=dateOfBirth ng-model=user.dateOfBirth is-open=opened max-date=maxDate datepicker-options=dateOptions date-disabled="disabled(date, mode)" required mongoose-error close-text="Close"> <span class=input-group-btn><button type=button class="btn btn-default" ng-click=open($event)><i class="glyphicon glyphicon-calendar"></i></button></span></p><p class=help-block ng-show=form.dateOfBirth.$error.mongoose>{{ errors.dateOfBirth }}</p></div></div><div class=col-sm-6><div class=form-group ng-class="{ \'has-success\': form.dateOfBirth.$valid && submitted, \'has-error\': form.dateOfBirth.$invalid && submitted }"><label>Sexe</label><select class=form-control name=gender ng-model=user.gender required mongoose-error><option value=homme>Homme</option><option value=femme>Femme</option></select><p class=help-block ng-show=form.gender.$error.mongoose>{{ errors.gender }}</p></div></div></div></div><!-- Buttons --><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Sign up</button> <a class="btn btn-default btn-lg btn-register" href=/login>Login</a></div><hr><div><a class="btn btn-facebook" href="" ng-click="loginOauth(\'facebook\')"><i class="fa fa-facebook"></i> Connect with Facebook</a> <a class="btn btn-google-plus" href="" ng-click="loginOauth(\'google\')"><i class="fa fa-google-plus"></i> Connect with Google+</a></div></form></div></div><hr></div>'),a.put("app/business/business-newPrestation/business-newPrestation.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div ng-include="\'components/navbar/navbar-secondary.html\'"></div><div class=container><div class=row><div class=col-sm-12><form class=form name=form ng-submit=submit(form)><!-- name --><div class=form-group ng-class="{ \'has-success\': form.name.$valid && submitted,\n		                                            \'has-error\': form.name.$invalid && submitted }"><label>Nom</label><input name=name class=form-control ng-model=prestation.name placeholder="p. ex. coupe de cheveux" required><p class=help-block ng-show="form.name.$error.required && submitted">Un nom est requis.</p></div><!-- shortDescription --><div class=form-group ng-class="{ \'has-success\': form.shortDescription.$valid && submitted,\n		                                            \'has-error\': form.shortDescription.$invalid && submitted }"><label>Description courte</label><textarea type=text name=shortDescription class=form-control ng-model=prestation.shortDescription placeholder="une description de moins de 50 charactères" required>\n		          <p class=help-block ng-show="form.shortDescription.$error.required && submitted">\n		            Une description est requise.\n		          </p>\n		        </div>\n\n		        <!-- Description -->\n		        <div class=form-group ng-class="{ \'has-success\': form.description.$valid && submitted,\n		                                            \'has-error\': form.description.$invalid && submitted }">\n		          <label>Description</label>\n\n		          <textarea name=description class=form-control ng-model=prestation.description placeholder="une description de moins de 200 charactères" required>\n		          <p class=help-block ng-show="form.description.$error.required && submitted">\n		            Une description est requise.\n		          </p>\n		        </div>\n\n		        <!-- duration -->\n				<div class=form-group>\n				  <label for=duration>Durée (minutes) :</label>\n				  <select class=form-control id=duration ng-model=prestation.duration required>\n				    <option value=5 selected>5</option>\n				    <option value=10>10</option>\n				    <option value=15>15</option>\n				    <option value=20>20</option>\n				    <option value=25>25</option>\n				    <option value=30>30</option>\n			    	<option value=35>35</option>\n				    <option value=40>40</option>\n				    <option value=45>45</option>\n				    <option value=50>50</option>\n				    <option value=55>55</option>\n				    <option value=60>60</option>\n				    <option value=65>65</option>\n				    <option value=70>70</option>\n				    <option value=75>75</option>\n				    <option value=80>80</option>\n				    <option value=85>85</option>\n				    <option value=90>90</option>\n			    	<option value=95>95</option>\n				    <option value=100>100</option>\n				    <option value=105>105</option>\n				    <option value=110>110</option>\n				    <option value=115>115</option>\n				    <option value=120>120</option>\n				  </select>\n				</div>\n\n        	<!-- Buttons -->\n	        <div class=button-margins>\n	          <button class="btn btn-success" type=submit>\n	           	Envoyer\n	          </button>\n	          <button class="btn btn-danger" ng-click="prestation = null">\n	           	Effacer\n	          </button>\n	          <a class="btn btn-default pull-right" href=/business/prestations>\n	           	Retour liste prestations\n	          </a>\n	        </div>\n\n			</form>\n		</div>\n	</div>\n</div>'),a.put("app/business/business-newRendezvous/business-newRendezvous.html","<div ng-include=\"'components/navbar/navbar.html'\"></div><div ng-include=\"'components/navbar/navbar-secondary.html'\"></div>prend un rendez-vous pour un client"),a.put("app/business/business-newSchedule/business-newSchedule.html","<div ng-include=\"'components/navbar/navbar.html'\"></div><div ng-include=\"'components/navbar/navbar-secondary.html'\"></div>créer un nouvelle horaire"),a.put("app/business/business-newStaff/business-newStaff.html","<div ng-include=\"'components/navbar/navbar.html'\"></div><div ng-include=\"'components/navbar/navbar-secondary.html'\"></div>Ajouter un nouveau staff"),a.put("app/business/business-prestations/business-prestations.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div ng-include="\'components/navbar/navbar-secondary.html\'"></div><div class=container><div class=row ng-repeat="prestation in prestations"><div class=row><h3>{{prestation.name}}</h3><hr></div><div class="col-sm-5 hr-right"><h4>Description :</h4><p>{{prestation.description}}</p><hr><h4>Courte description :</h4><p>{{prestation.shortDescription}}</p><hr><h4>Durée :</h4><p>{{prestation.duration}} minutes</p></div><div class=col-sm-7><table class=table><thead><tr><th>Categorie</th><th>Sexe</th><th>Age min</th><th>Age max</th><th>Prix</th><th>Actions</th></tr></thead><tbody><tr ng-repeat="price in prestation.prices"><td>{{price.categoryName}}</td><td>{{price.gender}}</td><td>{{price.ageLowLimit}}</td><td>{{price.ageHighLimit}}</td><td>{{price.price}}</td><td><a href=# class="btn btn-primary label"><i class="fa icon-tab fa-pencil-square-o"></i></a><div class="btn btn-danger label" ng-click="deletePrice(prestation._id, price._id)"><i class="fa icon-tab fa-trash-o"></i></div></td></tr><tr ng-show="hiddenForm === false"><td><input class=input-form-big ng-model=form.categoryName ng-maxlength="20"></td><td><select class=input-form-select ng-model=form.gender required><option value=mixte selected>mixte</option><option value=homme>homme</option><option value=femme>femme</option></select></td><td><input class=input-form-small type=number ng-model=form.ageLowLimit min=1 max=99 ngmaxlength=2 ngminlength="1"></td><td><input class=input-form-small type=number ng-model=form.ageHighLimit min=1 max=99 ngmaxlength=2 ngminlength="1"></td><td><input class=input-form-med type=number ng-model=form.price min=1 max=999 ngmaxlength=3 ngminlength="1"></td><td><div class="btn btn-success label" ng-click="addPrice(prestation._id, form); hiddenForm=true"><i class="fa icon-tab fa-plus"></i></div><div class="btn btn-danger label" ng-click="hiddenForm=true"><i class="fa icon-tab fa-times"></i></div></td></tr></tbody></table><div class="btn btn-success btn-sm pull-right" ng-click="hiddenForm = false" ng-show="hiddenForm === true"><i class="fa icon-tab fa-plus"></i> Ajouter un nouveau prix</div></div></div></div>'),a.put("app/business/business-rendezvous/business-rendezvous.html","<div ng-include=\"'components/navbar/navbar.html'\"></div><div ng-include=\"'components/navbar/navbar-secondary.html'\"></div>voir les rendez-vous du business"),a.put("app/business/business-schedules/business-schedules.html","<div ng-include=\"'components/navbar/navbar.html'\"></div><div ng-include=\"'components/navbar/navbar-secondary.html'\"></div>voir les horaires"),a.put("app/business/business-show/business-show.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div ng-include="\'components/navbar/navbar-secondary.html\'"></div><div class=container><div class=row><!-- colonne gauche --><div class=col-sm-4><img class=img-rounded ng-src={{business.imageBusinessUrl}} style="max-height:200px"></div><!-- colonne centrale --><div class=col-sm-4><h3>Adresse géographique</h3><hr class=divider><h4>{{business.name}}</h4><p><i class="fa icon-infos fa-building"></i> {{business.zip}} {{business.city}} ({{business.canton}})</p><p><i class="fa icon-infos fa-road"></i> {{business.street}}</p></div><!-- colonne droite --><div class=col-sm-4><h3>Adresse de infos</h3><hr class=divider><p><i class="fa icon-infos fa-phone"></i> {{business.phone}}</p><p><i class="fa icon-infos fa-mobile"></i> {{business.mobile}}</p><p><i class="fa icon-infos fa-external-link-square"></i> {{business.site}}</p><p><i class="fa icon-infos fa-facebook-official"></i> {{business.facebook}}</p></div></div><div class=row><!-- colonne horaires pleine largeur --><div class="col-sm-7 col-schedule"><h3>Horaires</h3><hr class=divider><table class=table><thead><tr><th>Jour</th><th>Description</th><th>Débute</th><th>Termine</th></tr></thead><tbody><tr ng-repeat="schedule in business.schedules"><td>{{schedule.dayName}}</td><td>{{schedule.description}}</td><td>{{schedule.startHour}}</td><td>{{schedule.endHour}}</td></tr></tbody></table></div></div></div>'),a.put("app/business/business-staffs/business-staffs.html","<div ng-include=\"'components/navbar/navbar.html'\"></div><div ng-include=\"'components/navbar/navbar-secondary.html'\"></div>voir la liste du personnel"),a.put("app/business/business-update/business-update.html","<div ng-include=\"'components/navbar/navbar.html'\"></div><div ng-include=\"'components/navbar/navbar-secondary.html'\"></div>mettre à jour les infos du salon"),a.put("app/business/business.html","<div ng-include=\"'components/navbar/navbar.html'\"></div><div ng-include=\"'components/navbar/navbar-secondary.html'\"></div><div class=container><h1>Vue d'ensemble : {{business.name}}</h1></div>"),
a.put("app/main/main.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><header class=hero-unit id=banner><div class=container><h1>Page d\'accueil</h1><p class=lead>Bienvenu sur la page d\'accueil !</p></div></header><div class=container><div class=row><div class=col-lg-12><h1 class=page-header>Salons de coiffures :</h1><ul class="nav nav-tabs nav-stacked col-md-4 col-lg-4 col-sm-6" ng-repeat="business in businesses"><li><a href=# tooltip={{business.city}}>{{business.name}}</a></li></ul></div></div></div><!--     <div class="container">\n      \n      <div>\n        <button class="btn btn-primary" ng-click="login()" ng-disabled="loginStatus.status == \'connected\'">Connect with Facebook</button>\n         &nbsp; \n        <button class="btn btn-danger" ng-click="logout()" ng-disabled="!loginStatus || loginStatus.status != \'connected\'">Logout</button>\n      </div>\n      \n      <br>\n\n      <h4>\n        Bonjour, <span ng-show="me.name">{{ me.name }}</span><span ng-show="me.error">tu n\'est pas connecté.</span>!\n      </h4>\n\n    </div> --><footer class=footer><div class=container><p>TB2015 | Direct Haircut | <a href=https://github.com/LL0892/TB2015>Git projet</a></p></div></footer>'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar-secondary.html",'<nav class="navbar navbar-default navbar-lower" role=navigation ng-controller=NavbarSecondryCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><!-- Salon button --><li id=salon class=btn-group dropdown is-open=status1.isopen><a href=# class=dropdown-toggle dropdown-toggle ng-click=toggleDropdown(status1)>Le salon <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=/business/show>Voir les infos du salon</a></li><li class=divider></li><li><a href=/business/update><i class="glyphicon glyphicon glyphicon-pencil" aria-hidden=true></i> Modifier les infos du salon</a></li></ul></li><!-- Rendezvous button --><li id=rendezvous class=btn-group dropdown is-open=status5.isopen><a href=# class=dropdown-toggle dropdown-toggle ng-click=toggleDropdown(status5)>Rendez-vous <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=/business/rendezvous>Voir les rendez-vous</a></li><li class=divider></li><li><a href=/business/newRendezvous><i class="glyphicon glyphicon glyphicon-book" aria-hidden=true></i> Prendre un rendez-vous</a></li></ul></li><!-- Prestation button --><li id=prestation class=btn-group dropdown is-open=status2.isopen><a href=# class=dropdown-toggle dropdown-toggle ng-click=toggleDropdown(status2)>Prestations <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=/business/prestations>Voir les prestations</a></li><li class=divider></li><li><a href=/business/newPrestation><i class="glyphicon glyphicon glyphicon-plus" aria-hidden=true></i> Ajouter une prestation</a></li></ul></li><!-- Horaires button --><li id=horaire class=btn-group dropdown is-open=status3.isopen><a href=# class=dropdown-toggle dropdown-toggle ng-click=toggleDropdown(status3)>Horaires <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=/business/schedules>Voir les tranches horaires</a></li><li class=divider></li><li><a href=/business/newSchedule><i class="glyphicon glyphicon glyphicon-plus" aria-hidden=true></i> Ajouter une tranche horaire</a></li></ul></li><!-- Staff button --><li id=staff class=btn-group dropdown is-open=status4.isopen><a href=# class=dropdown-toggle dropdown-toggle ng-click=toggleDropdown(status4)>Personnel <span class=caret></span></a><ul class=dropdown-menu role=menu><li><a href=/business/staffs>Voir le personnel du salon</a></li><li class=divider></li><li><a href=/business/newStaff><i class="glyphicon glyphicon glyphicon-plus" aria-hidden=true></i> Ajouter un membre au personnel</a></li></ul></li></ul></div></div></nav>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>tb</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li><li ng-show=isStaff() ng-class="{active: isActive(\'/business\')}"><a href=/business>Gestion du salon</a></li></ul><ul class="nav navbar-nav navbar-right"><li ng-hide=isLoggedIn() ng-class="{active: isActive(\'/signup\')}"><a href=/signup>Sign up</a></li><li ng-hide=isLoggedIn() ng-class="{active: isActive(\'/login\')}"><a href=/login>Login</a></li><li ng-show=isLoggedIn() ng-class="{active: isActive(\'/settings\')}"><a href=/settings><span class="glyphicon glyphicon-cog"></span></a></li><li ng-show=isLoggedIn() ng-class="{active: isActive(\'/logout\')}"><a href="" ng-click=logout()>Logout</a></li></ul></div></div></div>')}]);